# Supabase ν”„λ΅μ νΈ μ„¤μ • - ν‘μ¤€ μ¤€μ κ²€ν†  λ³΄κ³ μ„

**μ”μ²­μ**: DevOps ν€ κ²€ν†  μ”μ²­
**κ²€ν† μ**: Standards Guardian
**κ²€ν†  λ€μƒ**: `management/requests/to-devops/003-supabase-project-setup.md`

## π“‹ κ²€ν†  κ°μ”

DevOpsν€μ Supabase ν”„λ΅μ νΈ μ„¤μ • μ‘μ—…μ„ ν‘μ¤€ μ¤€μ μΈ΅λ©΄μ—μ„ κ²€ν† ν•μ€μµλ‹λ‹¤.

## β… μ¤€μ μƒνƒ: APPROVED

μ „μ²΄μ μΈ μ‘μ—… μν–‰μ΄ ν”„λ΅μ νΈ ν‘μ¤€μ— λ§κ² μ΄λ£¨μ–΄μ΅μµλ‹λ‹¤.

## π” κ²€ν†  μ„Έλ¶€μ‚¬ν•­

### 1. Next.js 14 App Router μ¤€μ
**β… μ¤€μ**
- API κ²½λ΅: `/api/test/database`κ°€ `app/` λ””λ ‰ν† λ¦¬μ—μ„ μ¬λ°”λ¥΄κ² κµ¬μ„±λ¨
- `NextRequest`/`NextResponse` μ‚¬μ©μΌλ΅ App Router ν¨ν„΄ μ¤€μ
- TypeScript μ—„κ²© λ¨λ“: `tsconfig.json`μ—μ„ `"strict": true` ν™μ„±ν™” ν™•μΈ

### 2. λ°μ΄ν„°λ² μ΄μ¤ ν‘μ¤€ μ¤€μ
**β… μ¤€μ**
- λ°μ΄ν„°λ² μ΄μ¤ λ³€κ²½: λ§μ΄κ·Έλ μ΄μ… ν†µν•΄ μν–‰ (μ”μ²­μ—μ„ μ™„λ£λ¨ ν™•μΈ)
- μ™Έλν‚¤ κ΄€κ³„: Prisma μ¤ν‚¤λ§μ—μ„ μ μ ν• κ΄€κ³„ μ •μ ν™•μΈ
- PostgreSQL Provider μ‚¬μ©: Supabase νΈν™μ„± ν™•μΈ

### 3. ν™κ²½λ³€μ λ° λ³΄μ• κ΄€λ¦¬
**β… μ¤€μ**
- SERVICE_ROLE_KEY: μ„λ²„μ‚¬μ΄λ“ μ „μ©μΌλ΅ μ¬λ°”λ¥΄κ² μ‚¬μ©
  - `backend/src/lib/supabase.ts`μ—μ„ `supabaseAdmin` ν΄λΌμ΄μ–ΈνΈλ΅ λ¶„λ¦¬
- `.env` νμΌ λ³΄νΈ: `.gitignore`μ— `.env*` ν¨ν„΄μΌλ΅ μ μ™Έλμ–΄ λ²„μ „ κ΄€λ¦¬μ— ν¬ν•¨λμ§€ μ•μ

### 4. Supabase ν΄λΌμ΄μ–ΈνΈ κµ¬μ„±
**β… μ¤€μ**
- νƒ€μ… μ•μ „μ„±: `Database` νƒ€μ…μ„ μ‚¬μ©ν•μ—¬ νƒ€μ… μ•μ „μ„± λ³΄μ¥
- ν΄λΌμ΄μ–ΈνΈ λ¶„λ¦¬: κ³µκ°/κ΄€λ¦¬μ ν΄λΌμ΄μ–ΈνΈ μ μ ν λ¶„λ¦¬
- ν™κ²½λ³€μ μ‚¬μ©: μ¬λ°”λ¥Έ ν™κ²½λ³€μ μ°Έμ΅° ν™•μΈ

### 5. RLS μ •μ±… κ²€ν† 
**β… μ¤€μ**
- λ¨λ“  ν…μ΄λΈ”μ— RLS μ •μ±… ν™μ„±ν™” (μ”μ²­μ—μ„ μ™„λ£λ¨ μ–ΈκΈ‰)
- ν…μ¤νΈ APIμ— RLS μ •μ±… κ²€μ¦ ν¬ν•¨ ν™•μΈ

## β οΈ κ²½κ³  μ‚¬ν•­ (CRITICAL μμ¤€ μ•„λ‹)

### λ³΄μ• κ°•ν™” κ¶μ¥μ‚¬ν•­
1. **JWT_SECRET λ³€κ²½ ν•„μ**
   - ν„μ¬: `"your-32-character-or-longer-secret-key-here"`
   - **κ¶μ¥**: ν”„λ΅λ•μ… λ°°ν¬ μ „ λ°λ“μ‹ κ°•λ ¥ν• λ¬Έμμ—΄λ΅ λ³€κ²½

2. **JWT_REFRESH_SECRET λ³€κ²½**
   - ν„μ¬: `"your-32-character-or-longer-refresh-secret-key-here"`
   - **κ¶μ¥**: λ³„λ„μ κ°•λ ¥ν• λΉ„λ°€ ν‚¤λ΅ μ„¤μ •

3. **μ™Έλ¶€ API ν‚¤ μ„¤μ •**
   - `NEWS_API_KEY`: ν„μ¬ κ°’ μ„¤μ • ν•„μ” (κ°λ°μ© κΈ°λ³Έκ°’)
   - `OPENAI_API_KEY`: ν„μ¬ κ°’ μ„¤μ • ν•„μ” (AI λ¶„μ„μ©)

## π“ κ²€ν†  κ²°κ³Ό μ”μ•½

```yaml
review_result:
  status: APPROVED
  violations: []
  conditions:
    - "JWT_SECRET λ° JWT_REFRESH_SECRETμ„ κ°•λ ¥ν• κ°’μΌλ΅ λ³€κ²½"
    - "NEWS_API_KEY λ° OPENAI_API_KEYλ¥Ό μ‹¤μ  κ°’μΌλ΅ μ„¤μ •"
  minor_improvements:
    - "ν™κ²½λ³€μ μμ  νμΌμ κΈ°λ³Έκ°’λ“¤μ„ λ” λ…ν™•ν•κ² μ„¤λ…"
```
## π›΅οΈ ν‘μ¤€ μ¤€μ μ μ

- **μ•„ν‚¤ν…μ² μ¤€μ**: 100%
- **λ³΄μ• μ¤€μ**: 95% (κ²½κ³  μ‚¬ν•­ μμ)
- **μ½”λ“ ν’μ§**: 100%

## π― κ²°λ΅ 

**DevOpsν€μ μ‘μ—…μ€ λ¨λ“  μ£Όμ” ν‘μ¤€μ„ μ¤€μν•μ—¬ APPROVED μƒνƒμ…λ‹λ‹¤.**

### κ¶μ¥ Actions:
1. **IMMEDIATE**: JWT_SECRET κ΄€λ ¨ ν™κ²½λ³€μλ“¤μ„ ν”„λ΅λ•μ… μ©λ„λ΅ λ³€κ²½
2. **BEFORE DEPLOY**: μ™Έλ¶€ API ν‚¤λ“¤μ„ μ‹¤μ  κ°’μΌλ΅ μ„¤μ •
3. **MONITOR**: ν”„λ΅λ•μ… ν™κ²½μ—μ„ λ³΄μ• μ •μ±… μ§€μ† λ¨λ‹ν„°λ§

## π“ μ°Έκ³  λ¬Έμ„
- μ”μ²­ λ¬Έμ„: `management/requests/to-devops/003-supabase-project-setup.md`
- Backend λ¬Έμ„: `backend/database/README.md`
- λ³΄μ• ν‘μ¤€: `management/contracts/standards/security-standards.md`

---
**μƒμ„±μΌ**: 2025-01-08
**κ²€ν† μ**: Standards Guardian
**κ²°κ³Ό**: ν‘μ¤€ μ¤€μ ν™•μΈλ¨ β…