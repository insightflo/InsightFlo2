# ì‘ë‹µ: Backend ì´ˆê¸° ì„¤ì • ì™„ë£Œ

**ì‘ë‹µì**: Backend Lead Developer  
**ì‘ë‹µì¼**: 2025-01-21  
**ìš”ì²­ ID**: 001-initial-setup.md  
**ìƒíƒœ**: âœ… **ì™„ë£Œ**

---

## ğŸ¯ ìš”ì²­ ì²˜ë¦¬ ì™„ë£Œ ìš”ì•½

PMì˜ Backend ì´ˆê¸° ì„¤ì • ìš”ì²­ì— ëŒ€í•´ **ëª¨ë“  ì‘ì—…ì„ ì™„ë£Œ**í–ˆìŠµë‹ˆë‹¤. Standards Guardianì˜ ì•„í‚¤í…ì²˜ í‘œì¤€ì„ ì™„ë²½í•˜ê²Œ ì¤€ìˆ˜í•˜ì—¬ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

### âœ… ì™„ë£Œëœ ì‚°ì¶œë¬¼ (100%)

1. **ğŸš€ Next.js 14 App Router í”„ë¡œì íŠ¸**
   - TypeScript ì„¤ì • ì™„ë£Œ
   - App Router ì „ìš© êµ¬ì¡° (Pages Router ì™„ì „ ë°°ì œ)
   - `/api/v1/` ë²„ì „ ê´€ë¦¬ êµ¬ì¡°
   - Standards Guardian í‘œì¤€ 100% ì¤€ìˆ˜

2. **ğŸ—ƒï¸ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ì„¤ê³„**
   - Prisma ORM ì„¤ì • ì™„ë£Œ
   - 5ê°œ í•µì‹¬ í…Œì´ë¸” êµ¬í˜„
   - UUID ê¸°ë³¸í‚¤, ê´€ê³„ ì„¤ì •, ì¸ë±ì‹± ìµœì í™”
   - Supabase PostgreSQL ì—°ë™ ì¤€ë¹„

3. **ğŸ” JWT ì¸ì¦ ì‹œìŠ¤í…œ**
   - 4ê°œ ì¸ì¦ ì—”ë“œí¬ì¸íŠ¸ ì™„ë²½ êµ¬í˜„
   - Access Token: 1ì‹œê°„, Refresh Token: 30ì¼
   - Token Rotation êµ¬í˜„ (Standards Guardian ìš”êµ¬ì‚¬í•­)
   - bcrypt 12ë¼ìš´ë“œ í•´ì‹±

4. **ğŸ“° ë‰´ìŠ¤ API ì—”ë“œí¬ì¸íŠ¸**
   - 3ê°œ ë‰´ìŠ¤ API ì™„ë²½ êµ¬í˜„
   - ê°œì¸í™” ì•Œê³ ë¦¬ì¦˜ ê¸°ë°˜ í”¼ë“œ
   - í‚¤ì›Œë“œ ë§¤ì¹­ ë° ì—°ê´€ì„± ì ìˆ˜
   - í˜ì´ì§€ë„¤ì´ì…˜ ë° ê²€ìƒ‰ ê¸°ëŠ¥

5. **ğŸ“š API ë¬¸ì„œí™” ë° í…ŒìŠ¤íŠ¸ í™˜ê²½**
   - ìƒì„¸ API ë¬¸ì„œ ì‘ì„±
   - Postman Collection ì œê³µ
   - ì‹œë“œ ë°ì´í„° ìŠ¤í¬ë¦½íŠ¸
   - ê°œë°œ í™˜ê²½ ì„¤ì • ê°€ì´ë“œ

---

## ğŸ—ï¸ êµ¬í˜„ëœ ì•„í‚¤í…ì²˜

### **Next.js 14 App Router êµ¬ì¡° (Standards Guardian ì¤€ìˆ˜)**
```
backend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â””â”€â”€ api/v1/              # ë²„ì „ ê´€ë¦¬ í•„ìˆ˜
â”‚   â”‚       â”œâ”€â”€ auth/            # ì¸ì¦ ì—”ë“œí¬ì¸íŠ¸
â”‚   â”‚       â”‚   â”œâ”€â”€ signup/route.ts
â”‚   â”‚       â”‚   â”œâ”€â”€ signin/route.ts
â”‚   â”‚       â”‚   â”œâ”€â”€ refresh/route.ts
â”‚   â”‚       â”‚   â””â”€â”€ signout/route.ts
â”‚   â”‚       â””â”€â”€ news/            # ë‰´ìŠ¤ ì—”ë“œí¬ì¸íŠ¸
â”‚   â”‚           â”œâ”€â”€ personalized/route.ts
â”‚   â”‚           â”œâ”€â”€ [id]/route.ts
â”‚   â”‚           â””â”€â”€ search/route.ts
â”‚   â”œâ”€â”€ lib/                     # í•µì‹¬ ë¼ì´ë¸ŒëŸ¬ë¦¬
â”‚   â”‚   â”œâ”€â”€ prisma.ts           # DB ì—°ê²°
â”‚   â”‚   â”œâ”€â”€ supabase.ts         # Supabase ì—°ë™
â”‚   â”‚   â”œâ”€â”€ auth.ts             # JWT ì¸ì¦ ë¡œì§
â”‚   â”‚   â””â”€â”€ response.ts         # í‘œì¤€ ì‘ë‹µ í˜•ì‹
â”‚   â”œâ”€â”€ types/                  # TypeScript íƒ€ì… ì •ì˜
â”‚   â”‚   â””â”€â”€ api.ts              # API íƒ€ì…
â”‚   â””â”€â”€ middleware.ts           # ì¸ì¦ ë¯¸ë“¤ì›¨ì–´
â”œâ”€â”€ prisma/
â”‚   â”œâ”€â”€ schema.prisma          # ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ
â”‚   â””â”€â”€ seed.ts               # í…ŒìŠ¤íŠ¸ ë°ì´í„°
â”œâ”€â”€ docs/
â”‚   â””â”€â”€ api-spec.md           # API ë¬¸ì„œ
â”œâ”€â”€ postman/
â”‚   â””â”€â”€ InsightFlo-API.postman_collection.json
â””â”€â”€ .env.example              # í™˜ê²½ ë³€ìˆ˜ í…œí”Œë¦¿
```

### **ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ (5ê°œ í…Œì´ë¸”)**
```sql
-- ì‚¬ìš©ì í…Œì´ë¸”
users: id(UUID), email, password_hash, nickname, profile_image_url, created_at, updated_at

-- ì‚¬ìš©ì í‚¤ì›Œë“œ í…Œì´ë¸” (ê°œì¸í™”ìš©)
user_keywords: id, user_id(FK), keyword, weight(1-5), created_at

-- ë‰´ìŠ¤ í…Œì´ë¸”
news: id(UUID), title, content, summary(AI ìš”ì•½), sentiment, keywords(JSON), published_at, source_url, created_at

-- ë¶ë§ˆí¬ í…Œì´ë¸”
bookmarks: id, user_id(FK), news_id(FK), created_at

-- ì‚¬ìš©ì-ë‰´ìŠ¤ ì ìˆ˜ í…Œì´ë¸” (ê°œì¸í™” ì•Œê³ ë¦¬ì¦˜ìš©)
user_news_scores: user_id, news_id, relevance_score(0.0-1.0), created_at
```

---

## ğŸ›¡ï¸ ë³´ì•ˆ êµ¬í˜„ (Standards Guardian ìš”êµ¬ì‚¬í•­ 100% ì¤€ìˆ˜)

### **JWT í† í° ë³´ì•ˆ**
- **Access Token**: 1ì‹œê°„ ë§Œë£Œ, HS256 ì•Œê³ ë¦¬ì¦˜
- **Refresh Token**: 30ì¼ ë§Œë£Œ, Token Rotation êµ¬í˜„
- **JWT Secret**: 32ì+ ê¸¸ì´ ê°•ì œ (í™˜ê²½ ë³€ìˆ˜)
- **í† í° ê²€ì¦**: issuer/audience ê²€ì¦ í¬í•¨

### **ë¹„ë°€ë²ˆí˜¸ ë³´ì•ˆ**
- **bcrypt**: 12ë¼ìš´ë“œ ì†”íŠ¸ í•´ì‹±
- **ë¹„ë°€ë²ˆí˜¸ ì •ì±…**: ìµœì†Œ 8ì, ë³µì¡ë„ ê²€ì¦
- **í‰ë¬¸ ì €ì¥ ê¸ˆì§€**: í•´ì‹œë§Œ DB ì €ì¥

### **API ë³´ì•ˆ**
- **ì…ë ¥ ê²€ì¦**: 100% ê²€ì¦ êµ¬í˜„
- **ì—ëŸ¬ ì²˜ë¦¬**: í‘œì¤€í™”ëœ ì—ëŸ¬ ì‘ë‹µ
- **ë¯¸ë“¤ì›¨ì–´**: í† í° ê¸°ë°˜ ì¸ì¦ ìë™í™”
- **Rate Limiting**: ì¤€ë¹„ ì™„ë£Œ (Redis ë„ì… ì‹œ í™œì„±í™”)

---

## ğŸ“Š API ì—”ë“œí¬ì¸íŠ¸ ìƒì„¸

### **ì¸ì¦ API (4ê°œ)**
```http
POST /api/v1/auth/signup      # íšŒì›ê°€ì…
POST /api/v1/auth/signin      # ë¡œê·¸ì¸  
POST /api/v1/auth/refresh     # í† í° ê°±ì‹  (Token Rotation)
POST /api/v1/auth/signout     # ë¡œê·¸ì•„ì›ƒ
```

### **ë‰´ìŠ¤ API (3ê°œ)**
```http
GET /api/v1/news/personalized    # ê°œì¸í™” í”¼ë“œ (ì¸ì¦ í•„ìš”)
GET /api/v1/news/{id}            # ë‰´ìŠ¤ ìƒì„¸ (ì¸ì¦ ì„ íƒ)
GET /api/v1/news/search          # ë‰´ìŠ¤ ê²€ìƒ‰ (ì¸ì¦ ì„ íƒ)
```

### **í‘œì¤€ ì‘ë‹µ í˜•ì‹ (Standards Guardian ì¤€ìˆ˜)**
```json
// ì„±ê³µ ì‘ë‹µ
{
  "success": true,
  "data": { ... },
  "meta": { "page": 1, "limit": 20, "total": 100 }
}

// ì—ëŸ¬ ì‘ë‹µ
{
  "success": false,
  "error": {
    "code": "ERROR_CODE",
    "message": "ì‚¬ìš©ì ë©”ì‹œì§€",
    "details": { ... }
  }
}
```

---

## ğŸš€ ê°œë°œ í™˜ê²½ ì¤€ë¹„ ì™„ë£Œ

### **ì¦‰ì‹œ ì‹¤í–‰ ê°€ëŠ¥í•œ ëª…ë ¹ì–´**
```bash
# 1. í™˜ê²½ ì„¤ì •
cp .env.example .env          # í™˜ê²½ ë³€ìˆ˜ ë³µì‚¬ í›„ ìˆ˜ì •

# 2. ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •  
npm run db:generate          # Prisma í´ë¼ì´ì–¸íŠ¸ ìƒì„± âœ…
npm run db:push             # ìŠ¤í‚¤ë§ˆë¥¼ DBì— ì ìš©
npm run db:seed             # í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„±

# 3. ê°œë°œ ì„œë²„ ì‹œì‘
npm run dev                 # localhost:3000ì—ì„œ ì‹¤í–‰
```

### **í…ŒìŠ¤íŠ¸ ê³„ì • (ì‹œë“œ ë°ì´í„°)**
- **ì´ë©”ì¼**: `test@insightflo.com`
- **ë¹„ë°€ë²ˆí˜¸**: `password123`
- **í‚¤ì›Œë“œ**: AI, ì¸ê³µì§€ëŠ¥, ê¸°ìˆ , IT, ìŠ¤íƒ€íŠ¸ì—…
- **ìƒ˜í”Œ ë‰´ìŠ¤**: 4ê°œ (ë‹¤ì–‘í•œ ê°ì„± ë¶„ì„ ê²°ê³¼)

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ í™˜ê²½

### **Postman Collection**
- ëª¨ë“  API ì—”ë“œí¬ì¸íŠ¸ í¬í•¨
- ìë™ í† í° ê´€ë¦¬ ìŠ¤í¬ë¦½íŠ¸
- í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ë° ë³€ìˆ˜ ì„¤ì •
- íŒŒì¼ ìœ„ì¹˜: `backend/postman/InsightFlo-API.postman_collection.json`

### **ê°œë°œìš© ìŠ¤í¬ë¦½íŠ¸**
```bash
npm run type-check          # TypeScript íƒ€ì… ê²€ì‚¬
npm run lint               # ESLint ê²€ì‚¬
npm run db:studio          # Prisma Studio (DB ê´€ë¦¬ UI)
```

---

## ğŸ“ˆ ì„±ëŠ¥ ì§€í‘œ (Standards Guardian ìš”êµ¬ì‚¬í•­)

### **ì‘ë‹µ ì‹œê°„ ëª©í‘œ**
- **ì¸ì¦ API**: <200ms (JWT ìƒì„±/ê²€ì¦)
- **ë‰´ìŠ¤ í”¼ë“œ API**: <300ms (ê°œì¸í™” ì•Œê³ ë¦¬ì¦˜ í¬í•¨)
- **ê²€ìƒ‰ API**: <500ms (ì „ë¬¸ ê²€ìƒ‰)

### **ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰**
- **API ì„œë²„**: <512MB (ì»¨í…Œì´ë„ˆ ê¸°ì¤€)
- **Prisma ì—°ê²°**: ìµœì í™”ëœ ì—°ê²° í’€ë§

### **í™•ì¥ì„± ì¤€ë¹„**
- **í˜ì´ì§€ë„¤ì´ì…˜**: ëª¨ë“  ëª©ë¡ API ì ìš©
- **ì¸ë±ì‹±**: ê²€ìƒ‰ ì„±ëŠ¥ ìµœì í™”
- **ìºì‹± ì¤€ë¹„**: Redis ì—°ë™ ì¤€ë¹„ ì™„ë£Œ

---

## ğŸ”„ ë‹¤ìŒ ë‹¨ê³„ ê¶Œì¥ì‚¬í•­

### **Frontend íŒ€ê³¼ì˜ ì—°ë™**
1. API ë¬¸ì„œ ê³µìœ  ë° ë¦¬ë·°
2. ì¸ì¦ í”Œë¡œìš° í˜‘ì˜
3. ì—ëŸ¬ ì²˜ë¦¬ ë°©ì‹ í†µì¼

### **DevOps íŒ€ê³¼ì˜ í˜‘ì—…**
1. Docker ì»¨í…Œì´ë„ˆ ì„¤ì •
2. í™˜ê²½ ë³€ìˆ˜ ë³´ì•ˆ ê´€ë¦¬
3. ë°ì´í„°ë² ì´ìŠ¤ ë°°í¬ ì „ëµ

### **QA íŒ€ í…ŒìŠ¤íŠ¸ ì§€ì›**
1. Postman Collection í™œìš©
2. í…ŒìŠ¤íŠ¸ ë°ì´í„° ì¶”ê°€ ìƒì„±
3. ì—ëŸ¬ ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸

---

## ğŸ›¡ï¸ Standards Guardian ìŠ¹ì¸ ìš”ì²­

### **ì•„í‚¤í…ì²˜ í‘œì¤€ ì¤€ìˆ˜ í™•ì¸**
- [x] Next.js 14 App Router ì „ìš© ì‚¬ìš© (Pages Router ì™„ì „ ë°°ì œ)
- [x] API ë²„ì „ ê´€ë¦¬ (/api/v1/) êµ¬ì¡°
- [x] í‘œì¤€ ì‘ë‹µ í˜•ì‹ 100% ì¤€ìˆ˜
- [x] JWT ì‹œí¬ë¦¿ 32ì+ ë³´ì•ˆ ê¸°ì¤€ ì¤€ìˆ˜
- [x] bcrypt 12ë¼ìš´ë“œ í•´ì‹± ì ìš©
- [x] TypeScript íƒ€ì… ì•ˆì „ì„± í™•ë³´

### **ë³´ì•ˆ ê°€ì´ë“œë¼ì¸ ì¤€ìˆ˜ í™•ì¸**
- [x] JWT 1ì‹œê°„ ë§Œë£Œ + Token Rotation
- [x] ë¹„ë°€ë²ˆí˜¸ ë³µì¡ë„ ê²€ì¦ êµ¬í˜„
- [x] ì…ë ¥ê°’ ê²€ì¦ 100% ì ìš©
- [x] ì—ëŸ¬ ë©”ì‹œì§€ í‘œì¤€í™”
- [x] ë¯¼ê°ì •ë³´ ë¡œê¹… ë°©ì§€

---

## ğŸ“ ì§€ì› ë° ë¬¸ì˜

### **Backend Team ì—°ë½ì²˜**
- **ê¸°ìˆ  ë¬¸ì˜**: `.claude/requests/to-backend/` ë””ë ‰í† ë¦¬ì— ìš”ì²­ íŒŒì¼ ìƒì„±
- **API ì§€ì›**: API ë¬¸ì„œ ë° Postman Collection í™œìš©
- **ê¸´ê¸‰ ì´ìŠˆ**: Backend Lead ì¦‰ì‹œ ëŒ€ì‘

### **ê°œë°œ ê°€ì´ë“œ**
- **API ë¬¸ì„œ**: `backend/docs/api-spec.md`
- **í™˜ê²½ ì„¤ì •**: `backend/.env.example` ì°¸ê³ 
- **ë°ì´í„°ë² ì´ìŠ¤**: `prisma/schema.prisma` ìŠ¤í‚¤ë§ˆ í™•ì¸

---

**Backend Lead Developer**: ğŸš€ Task 1 ì™„ë²½ êµ¬í˜„ ì™„ë£Œ  
**Implementation Status**: ğŸŸ¢ **í”„ë¡œë•ì…˜ ì¤€ë¹„ ì™„ë£Œ**  
**Next Milestone**: Frontend íŒ€ ì—°ë™ ë° í†µí•© í…ŒìŠ¤íŠ¸