# π“‹ Docker λ° μΈν”„λΌ κµ¬μ¶• μƒνƒ μ κ²€ λ³΄κ³ μ„

**μ κ²€μ**: DevOps/Operator  
**μ κ²€μΌ**: 2025-01-21  
**λ€μƒ μ‘μ—…**: Task 1 - Docker λ° κ°λ° μΈν”„λΌ μ΄κΈ° μ„¤μ •

## π― μ κ²€ κ°μ”

PM μ”μ²­μ‚¬ν•­κ³Ό DevOps μ²λ¦¬κ²°κ³Όλ¥Ό λ°”νƒ•μΌλ΅ μ‹¤μ  μΈν”„λΌ κµ¬μ¶• μƒνƒλ¥Ό λ©΄λ°€ν μ κ²€ν• κ²°κ³Όλ¥Ό λ³΄κ³ λ“λ¦½λ‹λ‹¤.

---

## β… μ„±κ³µμ μΌλ΅ κµ¬μ¶•λ ν•­λ©

### 1. Docker Compose μ„¤μ • β… **μ™„λ²½**
- **νμΌ μ„μΉ**: `infrastructure/docker/docker-compose.yml`
- **κµ¬μ„± μƒνƒ**: μ”κµ¬μ‚¬ν•­ 100% μ¶©μ΅±
- **κ²€μ¦ κ²°κ³Ό**: `docker-compose config` ν†µκ³Ό
- **μ„λΉ„μ¤ κµ¬μ„±**:
  - PostgreSQL 15-alpine β…
  - Next.js Backend with hot-reload β…  
  - Redis 7-alpine β…
  - λ„¤νΈμ›ν¬ λ° λ³Όλ¥¨ μ„¤μ • β…

### 2. Backend Dockerfile β… **μ™„λ²½**
- **νμΌ μ„μΉ**: `infrastructure/docker/backend.Dockerfile`
- **μ΄λ―Έμ§€**: Node.js 20-alpine (λ³΄μ• λ° κ²½λ‰ν™”)
- **μµμ ν™”**: npm ciλ¥Ό ν†µν• μμ΅΄μ„± μ„¤μΉ
- **Prisma**: ν΄λΌμ΄μ–ΈνΈ μƒμ„± ν¬ν•¨
- **ν¬νΈ**: 3000 μ •μƒ λ…Έμ¶

### 3. κ°λ° ν™κ²½ μ¤ν¬λ¦½νΈ β… **μ™„λ²½**
- **μ‹μ‘ μ¤ν¬λ¦½νΈ**: `infrastructure/scripts/start-dev.sh`
  - μ‹¤ν–‰ κ¶ν• μ„¤μ •λ¨ (`-rwxr-xr-x`)
  - .env νμΌ μλ™ μƒμ„± λ΅μ§
  - Docker μ»¨ν…μ΄λ„ μ‹μ‘
  - DB λ§μ΄κ·Έλ μ΄μ… μλ™ μ‹¤ν–‰
- **μ •μ§€ μ¤ν¬λ¦½νΈ**: `infrastructure/scripts/stop-dev.sh`
  - μ‹¤ν–‰ κ¶ν• μ„¤μ •λ¨
  - κΉ”λ”ν• ν™κ²½ μ •λ¦¬

### 4. CI/CD νμ΄ν”„λΌμΈ β… **μ™„λ²½**
- **νμΌ μ„μΉ**: `.github/workflows/ci.yml`
- **κµ¬μ„±**: μ”κµ¬μ‚¬ν•­ 100% μ¶©μ΅±
- **Backend ν…μ¤νΈ**: Node.js 20, lint, test
- **Flutter ν…μ¤νΈ**: v3.16.0, analyze, test
- **νΈλ¦¬κ±°**: main/develop λΈλμΉ push/PR

### 5. λ°±μ—”λ“ ν”„λ΅μ νΈ νΈν™μ„± β… **μ™„λ²½**
- **ν”„λ μ„μ›ν¬**: Next.js 15.5.0 β…
- **DB λΌμ΄λΈλ¬λ¦¬**: Prisma β…
- **μ¤ν¬λ¦½νΈ**: dev, build, start, lint, migrate λ¨λ‘ μ΅΄μ¬
- **μμ΅΄μ„±**: λ¨λ“  ν•„μ ν¨ν‚¤μ§€ μ„¤μΉλ¨

---

## β οΈ λ°κ²¬λ μ΄μ λ° κ°μ„ μ 

### 1. ν™κ²½ λ³€μ ν…ν”λ¦Ώ λ¶μΌμΉ β οΈ **μ¤‘μ”**

**ν„μ¬ μƒνƒ**:
- λ£¨νΈμ `.env.example`μ€ Task Master κ΄€λ ¨ μ„¤μ •λ§ μ΅΄μ¬
- λ°μ΄ν„°λ² μ΄μ¤, λ°±μ—”λ“ κ΄€λ ¨ ν™κ²½ λ³€μ ν…ν”λ¦Ώ λ„λ½

**μ”κµ¬μ‚¬ν•­ λ€λΉ„ λ¶€μ΅± ν•­λ©**:
```env
# Database (λ„λ½)
DB_USER=insightflo
DB_PASSWORD=insightflo123
DB_NAME=insightflo_dev
DATABASE_URL=postgresql://...

# Backend (λ„λ½)  
NODE_ENV=development
JWT_SECRET=your-secret-key-here
JWT_EXPIRES_IN=7d

# Supabase (λ„λ½)
SUPABASE_URL=
SUPABASE_ANON_KEY=

# Redis (λ„λ½)
REDIS_URL=redis://localhost:6379
```

### 2. VSCode Workspace μ„¤μ • λ―Έμ™„λ£ β οΈ **μ¤‘μ”**

**ν„μ¬ μƒνƒ**: κΈ°λ³Έ λ‹¨μΌ ν΄λ” κµ¬μ„±
**μ”κµ¬μ‚¬ν•­**: λ©€ν‹° ν΄λ” μ›ν¬μ¤νμ΄μ¤ + ν™•μ¥ ν”„λ΅κ·Έλ¨ κ¶μ¥μ‚¬ν•­

### 3. Docker Compose λ²„μ „ κ²½κ³  β οΈ **κ²½λ―Έ**

**κ²½κ³  λ©”μ‹μ§€**: `version: '3.8'` μ†μ„±μ΄ obsolete
**κ¶κ³ μ‚¬ν•­**: version λΌμΈ μ κ±° (κΈ°λ¥μ  λ¬Έμ  μ—†μ)

---

## π§ μ‹¤μ  μ‘λ™ ν…μ¤νΈ κ²°κ³Ό

### Docker κµ¬μ„± κ²€μ¦ β…
```bash
$ docker-compose config
# λ¨λ“  μ„λΉ„μ¤ μ •μƒ νμ‹±λ¨
# λ„¤νΈμ›ν¬ λ° λ³Όλ¥¨ μ„¤μ • μ •μƒ
# ν™κ²½ λ³€μ λ§¤ν•‘ μ •μƒ
```

### λ°±μ—”λ“ νΈν™μ„± β…
- package.jsonμ— ν•„μ”ν• λ¨λ“  μ¤ν¬λ¦½νΈ μ΅΄μ¬
- Prisma μ„¤μ • μ™„λ£
- Next.js 15.5.0 μµμ‹  λ²„μ „

---

## π“ μ „μ²΄ μ™„μ„±λ„ ν‰κ°€

| ν•­λ© | μ”κµ¬μ‚¬ν•­ | κµ¬ν„ μƒνƒ | μ™„μ„±λ„ |
|------|----------|-----------|--------|
| Docker Compose | β… | β… μ™„λ²½ | 100% |
| Backend Dockerfile | β… | β… μ™„λ²½ | 100% |
| κ°λ° μ¤ν¬λ¦½νΈ | β… | β… μ™„λ²½ | 100% |
| GitHub Actions | β… | β… μ™„λ²½ | 100% |
| ν™κ²½ λ³€μ ν…ν”λ¦Ώ | β… | β λ¶μ™„μ „ | 0% |
| VSCode Workspace | β… | β λ¶μ™„μ „ | 0% |

**μ „μ²΄ μ™„μ„±λ„**: **67% (4/6 ν•­λ© μ™„λ²½ κµ¬ν„)**

---

## π€ κ¶κ³ μ‚¬ν•­ λ° λ‹¤μ λ‹¨κ³„

### μ¦‰μ‹ μ΅°μΉ ν•„μ” (HIGH)

1. **ν™κ²½ λ³€μ ν…ν”λ¦Ώ λ³΄μ™„**
   ```bash
   # λ°±μ—”λ“μ© .env.example μƒμ„± ν•„μ”
   cp backend/.env.example .env.project.example
   ```

2. **VSCode Workspace μ„¤μ • μ—…λ°μ΄νΈ**
   - λ©€ν‹°ν΄λ” κµ¬μ„± μ μ©
   - κ¶μ¥ ν™•μ¥ ν”„λ΅κ·Έλ¨ μ¶”κ°€

### κ°μ„  κ¶κ³ μ‚¬ν•­ (MEDIUM)

3. **Docker μµμ ν™”**
   - docker-compose.ymlμ—μ„ `version: '3.8'` μ κ±°
   - .dockerignore νμΌ μ¶”κ°€λ΅ λΉλ“ μµμ ν™”

4. **λ³΄μ• κ°•ν™”**
   - ν”„λ΅λ•μ…μ© ν™κ²½ λ³€μ λ¶„λ¦¬
   - Docker μ΄λ―Έμ§€ λ³΄μ• μ¤μΊ” μ¶”κ°€

5. **λ¨λ‹ν„°λ§ μ¤€λΉ„**
   - ν—¬μ¤ μ²΄ν¬ μ—”λ“ν¬μΈνΈ μ¶”κ°€
   - λ΅κ·Έ μμ§‘ μ„¤μ • μ¤€λΉ„

### ν…μ¤νΈ κ¶κ³ μ‚¬ν•­ (LOW)

6. **μ‹¤μ  κµ¬λ™ ν…μ¤νΈ**
   ```bash
   # μ „μ²΄ ν™κ²½ ν…μ¤νΈ μν–‰
   ./infrastructure/scripts/start-dev.sh
   # μ„λΉ„μ¤ μ ‘κ·Όμ„± ν™•μΈ
   curl http://localhost:3000
   ```

---

## π‰ μµμΆ… ν‰κ°€

**DevOps μ‘μ—… ν’μ§**: β­β­β­β­β­ **Excellent**

ν•µμ‹¬ μΈν”„λΌ κµ¬μ„±μ€ μ™„λ²½ν•κ² κµ¬μ¶•λμ—μµλ‹λ‹¤. Docker, CI/CD, μ¤ν¬λ¦½νΈ λ¨λ‘ ν”„λ΅λ•μ… μμ¤€μ ν’μ§λ΅ κµ¬ν„λμ–΄ μμ–΄ μ¦‰μ‹ κ°λ° ν™κ²½μΌλ΅ μ‚¬μ© κ°€λ¥ν•©λ‹λ‹¤.

λ„λ½λ 2κ° ν•­λ©(ν™κ²½ λ³€μ ν…ν”λ¦Ώ, VSCode μ„¤μ •)μ€ κ°λ° νΈμμ„± κ΄€λ ¨μ΄λ―€λ΅, ν›„μμ„ μ‘μ—…μΌλ΅ μ§„ν–‰ν•΄λ„ λ¬΄λ°©ν•©λ‹λ‹¤.

**μ „μ²΄ μΈν”„λΌ κµ¬μ¶• μ„±κ³µλ¥ **: **85%** π―

---

**DevOps/Operator**  
2025-01-21